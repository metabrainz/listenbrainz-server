{%- from 'art/svg-templates/macros.j2' import render_entity_link, render_image_link -%}

<svg
    width="924"
    height="924"
    viewBox="0 0 924 924"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:cc="http://creativecommons.org/ns#"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    version="1.1"
    role="img"
    preserveAspectRatio="xMinYMin meet">
    <title>Top 9 albums of {{ year }} for {{ user_name }}</title>
    <desc>&#xA;
        {%- for album in images[:9] -%}
        {%- if loop.index == 10 -%}X{%- else -%}{{- loop.index -}}{%- endif -%}. {{ album.title }} - {{ album.artist }}&#xA;
        {%- endfor -%}
    </desc>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;500;900');
        @import url('https://fonts.googleapis.com/css2?family=Anonymous%20Pro:wght@400;700');
        text {
        fill: #F0EEE2;
        font-family: Inter, sans-serif;
        }
        .branding {
        font-size: 20px;
        letter-spacing: 0em;
        font-weight: 900;
        }
        .track-name, .track-name * {
        font-size: 20px;
        }
        .artist-name, .artist-name * {
        font-size: 20px;
        font-weight: 300;
        }
        .accent-color-stroke {
        stroke: {{ accent_color }};
        }
        stop:first-child {
        stop-color: {{background_color_1}};
        }
        .bg-color-1 {
        fill: {{background_color_1}};
        }
        stop:nth-child(2) {
        stop-color: {{background_color_2}};
        }
        .bg-color-2 {
        fill: {{background_color_2}};
        }
        .caption text tspan{
        font-size: 18px;
        font-weight: normal;
        font-family: 'Anonymous Pro', sans-serif;
        }
        .caption text tspan:first-child{
        font-weight:bold;
        }
    </style>
    <defs id="defs42">
        <linearGradient id="gradient" x1="-20%" y1="-20%" x2="100%" y2="100%"
            gradientUnits="userSpaceOnUse">
            <stop offset="0" stop-color="#083b2b" />
            <stop offset="1" stop-color="#111820" />
        </linearGradient>
        <clipPath id="clip">
            <use xlink:href="#background" />
        </clipPath>
        <clipPath id="clip-content">
            <use xlink:href="#content-clip" />
        </clipPath>
    </defs>
    <g clip-path="url(#clip)" letter-spacing="0em" font-weight="900" font-family="Inter, sans-serif"
        fill="#006D39">

        <rect id="background" height="924" fill="url(#gradient)" rx="4" ry="4" width="924" y="0"
            x="0" />
        <rect id="content-bg" width="750" height="750" x="85" y="80" fill="#00000040"
            rx="8" ry="8" />
        {% if branding != False %}
        <g id="g1264">
            {% if anonymous != True %}
            <text class="branding" x="30" y="43" id="text1248">{{user_name|upper|e}}</text>
            {% endif %}
            <text class="branding" x="30" y="897" id="text1250">9 TOP ALBUMS OF {{year}}</text>
            <text class="branding" x="894" y="897" id="text1246" text-anchor="end">LISTENBRAINZ</text>
            <text class="branding" x="894" y="43" id="text1252" text-anchor="end">#YEARINMUSIC</text>
        </g>
        {% endif %}
        <g id="images-clip" clip-path="url(#clip-content)">
            <g id="images" transform="translate(85,80)">
                {% for image in images[:9] %}
                {{ render_image_link(entity, image, show_caption) }}
                {% endfor %}
            </g>
        </g>
        <rect id="content-clip" width="750" height="750" x="85" y="80" fill="none"
            class="accent-color-stroke" rx="8" ry="8" />
    </g>
</svg>