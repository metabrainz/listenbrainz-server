{%- from 'art/svg-templates/macros.j2' import render_entity_link -%}

<svg
    width="924"
    height="924"
    viewBox="0 0 924 924"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:cc="http://creativecommons.org/ns#"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    version="1.1"
    role="img"
    preserveAspectRatio="xMinYMin meet">
    <title>Top 10 songs of {{ year }} for {{ user_name }}&#xA;</title>
    <desc>
        Top 10 songs of {{ year }} for {{ user_name }}:&#xA;
        {% for track in tracks[:10] %}
        {%- if loop.index == 10 -%}X{%- else -%}{{- loop.index -}}{%- endif -%}. {{
        track.track_name }} - {{ track.artist_name }}&#xA;
        {%- endfor -%}
    </desc>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;900');
        text {
        fill: #F0EEE2;
        font-family: Inter, sans-serif;
        font-weight: 900;
        }
        .branding {
        font-size: 20px;
        letter-spacing: 0em;
        font-weight: 900;
        }
        .track-name, .track-name * {
        font-size: 25px;
        }
        .artist-name, .artist-name * {
        font-size: 20px;
        font-weight: 300;
        }
        .accent-color-stroke {
        stroke: {{ accent_color }};
        }
        stop:first-child {
        stop-color: {{background_color_1}};
        }
        .bg-color-1 {
        fill: {{background_color_1}};
        }
        stop:nth-child(2) {
        stop-color: {{background_color_2}};
        }
        .bg-color-2 {
        fill: {{background_color_2}};
        }
    </style>
    <defs id="defs42">
        <linearGradient id="gradient" x1="-20%" y1="-20%" x2="100%" y2="100%"
            gradientUnits="userSpaceOnUse">
            <stop offset="0" stop-color="#083b2b" />
            <stop offset="1" stop-color="#111820" />
        </linearGradient>
        <clipPath id="clip">
            <use xlink:href="#background" />
        </clipPath>
    </defs>
    <g clip-path="url(#clip)" letter-spacing="0em" font-weight="900" font-family="Inter, sans-serif"
        fill="#006D39">

        <rect id="background" height="924" fill="url(#gradient)" rx="4" ry="4" width="924" y="0"
            x="0" />
        <g id="g1264">
            <rect width="770" height="770" x="77" y="77" fill="#00000040"
                class="accent-color-stroke" rx="8" ry="8" />
            <text class="branding" x="30" y="43" id="text1248">{{user_name|upper|e}}</text>
            <text class="branding" x="30" y="897" id="text1250">10 TOP SONGS OF {{year}}</text>
            <text class="branding" x="894" y="897" id="text1246" text-anchor="end">LISTENBRAINZ</text>
            <text class="branding" x="894" y="43" id="text1252" text-anchor="end">#YEARINMUSIC</text>
        </g>
        <g> {% set y_start = 250 %} {% set gap = 50 %} {% for track in tracks[:10] %} <text
                id="track-{{ loop.index }}" class="accent-color">
                <tspan x="150" y="{{ y_start + loop.index0 * gap }}"
                    id="track-{{ loop.index }}-number" class="track-name">
                    {% if loop.index == 10 %}
                    X
                    {% else %}
                    {{ loop.index }}
                    {% endif %}
                </tspan>
                <tspan x="185" y="{{ y_start + loop.index0 * gap }}" class="track-name"
                    id="track-{{ loop.index }}-name">
                    {{ render_entity_link("recording", track.recording_mbid, track.track_name) }}
                </tspan>
                <tspan x="185" dy="20" class="artist-name"
                    id="track-{{ loop.index }}-artist">
                    {{ render_entity_link("artist", track.artist_mbids[0], track.artist_name) }}
                </tspan>
            </text>
            {% endfor %} </g>
    </g>
</svg>